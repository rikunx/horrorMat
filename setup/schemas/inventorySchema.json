{
  "validator": {
    "$jsonSchema": {
      "bsonType": "object",
      "required": ["name", "image", "card"],
      "properties": {
        "name": {
          "bsonType": "string",
          "description": "must be a string and is required"
        },
        "image": {
          "bsonType": "string",
          "description": "must be a string and is required"
        },
        "card": {
          "enum": ["item", "weapon", "tome", "trinket", "ally", "artifact", "spell"],
          "description": "can only be one of the enum values and is required"
        },
        "effects": {
          "type": "array",
          "description": "list of effects of the item",
          "items": {
            "bsonType": "object",
            "required": ["situation", "bonuses"],
            "properties": {
              "situation": {
                "enum": ["combat", "research", "other world", "spell", "test", "acquire", "rest", "reckoning"],
                "description": "can only be one of the enum values and is required"
              },
              "cost": {
                "bsonType": "object",
                "description": "the cost for using the ability",
                "required": ["type", "value"],
                "properties": {
                  "type": {
                    "enum": ["clue", "health", "sanity", "location"],
                    "description": "can only be one of the enum values and is required"
                  },
                  "value": {
                    "bsonType": ["int", "string"],
                    "description": "must be an int or string and is required"
                  }
                }
              },
              "test": {
                "bsonType": "object",
                "description": "for bonuses that request a test to take affect",
                "required": ["type", "modifier"],
                "properties": {
                  "type": {
                    "enum": ["strength", "will", "lore", "influence", "observation"],
                    "description": "test against one of the attributes"
                  },
                  "modifier": {
                    "bsonType": "int",
                    "description": "modifier for test"
                  }
                }
              },
              "bonuses": {
                "type": "array",
                "description": "list of bonuses",
                "items": {
                  "bsonType": "object",
                  "required": ["attribute", "type", "value"],
                  "properties": {
                    "attribute": {
                      "enum": ["strength", "will", "lore", "influence", "observation", "health", "sanity", "any"],
                      "description": "can only be one of the enum values and is required"
                    },
                    "type": {
                      "enum": ["extra", "reroll", "additive", "duplicate", "clue"],
                      "description": "extra is for more dice. additive is for adding to a result. duplicate is for duplicating successes that are a certain value."
                    },
                    "value": {
                      "bsonType": "int",
                      "description": "how many extra rolls/re-rolls result from this ability or how much to heal. (Re-roll only) 0 indicates up to N dice originally rolled"
                    },
                    "additional": {
                      "bsonType": "int",
                      "description": "any additional number for bonuses (mainly for additive/duplicate)"
                    }
                  }
                }
              },
              "oncePerRound": {
                "type": "boolean",
                "description": "is the item used once per round?"
              },
              "disposable": {
                "type": "boolean",
                "description": "is this item used only once and then disposed?"
              }
            }
          }
        }
      }
    }
  }
}
